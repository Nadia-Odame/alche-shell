#!/usr/bin/env bash
# Group by IP and HTTP code, count occurrences and sort from highest to lowest

awk '{cnt[$1" "$9]++} END {for (k in cnt) print cnt[k], k}' "${1:-apache-access.log}" | sort -nr

